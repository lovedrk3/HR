@model IEnumerable<Model.CompensationTandardsModel>
@using Model;
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Update2</title>
    <link href="~/hr/css/table.css" rel="stylesheet" />
    <script src="~/Scripts/comm.js"></script>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
</head>
<body>
    <div id="div1">
        @using (Html.BeginForm("Update2", "CompensationTandards", FormMethod.Post))
        {

            <table width="100%">

                <tr>
                    <td>
                        <font color="black">
                            您正在做的业务是：人力资源--薪酬标准管理--薪酬标准登记
                        </font>
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        <input type="submit" value="提 交" onclick="check()" class="BUTTON_STYLE1">
                        <input type="reset" value="返 回" class="BUTTON_STYLE1">
                    </td>
                </tr>
            </table>
            <table id="stable" width="100%" border="1" cellpadding=0 cellspacing=1
                   bordercolorlight=#848284 bordercolordark=#eeeeee
                   class="TABLE_STYLE1">
                @foreach (var item in Model)
                {
                    <tr>
                        <td width="74" class="TD_STYLE1">
                            薪酬标准编号
                        </td>

                        <td width="168" class="TD_STYLE2">
                            @Html.TextBox("Ctid", item.Ctid, new { @class = "INPUT_STYLE2", @name = "standard.standardId", @id = "Ctid", @readonly = "readonly" })
                        </td>
                        <td width="83" class="TD_STYLE1">
                            薪酬标准名称
                        </td>
                        <td width="171" class="TD_STYLE2">
                            @Html.TextBox("CtName", item.CtName, new { @class = "INPUT_STYLE2" })
                            @Html.ValidationMessage("CtName", new { @class = "color" })
                        </td>
                        <td width="170" class="TD_STYLE1">
                            薪酬总额
                        </td>
                        <td width="138" class="TD_STYLE2">
                            @Html.TextBox("CtMoney", item.CtMoney, new { @class = "INPUT_STYLE2", @readonly = "readonly", @id = "ctMoneyid" })
                        </td>
                        <td width="103" class="TD_STYLE1">
                            &nbsp;
                        </td>
                        <td width="95" height="26" class="TD_STYLE2">
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td class="TD_STYLE1">
                            制定人
                        </td>
                        <td class="TD_STYLE2">
                            @Html.TextBox("CtMan", item.CtMan, new { @class = "INPUT_STYLE2" })
                            @Html.ValidationMessage("CtMan", new { @class = "color" })
                        </td>
                        <td class="TD_STYLE1">
                            变更人
                        </td>
                        <td class="TD_STYLE2">
                            @Html.TextBox("Ctregist", item.Ctregist, new { @class = "INPUT_STYLE2" ,@name="userName"})
                            @Html.ValidationMessage("Ctregist", new { @class = "color" })
                        </td>
                        <td class="TD_STYLE1">
                            变更时间
                        </td>
                        <td class="TD_STYLE2">
                            @Html.TextBox("CtregistDate", null, new { @class = "INPUT_STYLE2", @name = "standard.registTime", @id = "Tdate", @readonly = "readonly" })
                            @Html.Hidden("CtregistDate", @item.CtregistDate, new { @name = "cd" });
                        </td>
                        <td class="TD_STYLE1">
                            &nbsp;
                        </td>
                        <td class="TD_STYLE2">
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <td class="TD_STYLE1">
                            备注
                        </td>
                        <td colspan="7" class="TD_STYLE2">
                            <textarea name="standard.remark" rows="4" class="TEXTAREA_STYLE1">@item.bz</textarea>
                            <input type="hidden" name="dddd" value="@item.CtregistDate">
                            <input type="hidden" name="details[0].bz" value="@item.bz">
                            <input type="hidden" name="details[0].ctMan" value="@item.CtMan">
                            <input type="hidden" name="details[0].ctCtregist" value="@item.Ctregist">
                            <input type="hidden" name="fhyj" value="@item.fhyj">
                          
                        </td>
                    </tr>
                }
                <tr class="TD_STYLE1">
                    <td align="center">
                        序号
                    </td>
                    <td colspan="3">
                        薪酬项目名称
                    </td>
                    <td>
                        金额
                    </td>
                    <td colspan="3">
                        &nbsp;
                    </td>
                </tr>
                <tbody>
                    @foreach (var item2 in ViewBag.list)
                    {
                        <tr class="TD_STYLE2">
                            <td align="center">

                                @item2.Cpid
                                <input type="hidden" name="details[0].itemId" value="@item2.Cpid">

                            </td>
                            <td colspan="3">
                                @item2.CpName
                                <input type="hidden" id="details1" name="details[0].itemName" value=" @item2.CpName ">

                            </td>
                            <td>
                                <input type="text" id="salary1" value=@item2.CpMoney name="details[0].salary"
                                       onkeyup="countMoney('6','salary1')" class="INPUT_STYLE2">

                            </td>
                            <td colspan="3">
                                &nbsp;
                            </td>
                        </tr>
                    }




                </tbody>
            </table>
                <p>
                    &nbsp;
                </p>
        }
    </div>


    <script type="text/javascript">
            function check() {

                var designer = document.getElementById("designer");
                var standardName = document.getElementById("standardName");
                if (designer.value.length <= 0) {
                    alert("制定人不可为空!!!");
                    return;
                }
                if (standardName.value.length <= 0) {
                    alert("薪酬标准名称不可为空!!!");
                    return;
                }
                document.forms[0].submit();
            }
            function countMoney(obj, o) {

                if (isNaN(document.getElementById(o).value) || document.getElementById(o).value < 0) {
                    alert("金额填写错误!");
                    document.getElementById(o).value = "0.00";
                    return;
                }
                var sum = 0;
                for (var i = 1; i <= obj; i++) {
                    var salary = document.getElementById("salary" + i).value;
                    if (salary == "") {
                        salary = "0.00";
                    }
                    sum = Number(sum) + Number(salary);

                }
                document.getElementById("sumSalary").value = sum;

            }
            function time() {
                var tdate = document.getElementById("Tdate");
                var d = new Date();
                var y = d.getFullYear();
                var moth = d.getMonth() + 1;
                var date = d.getDate();
                var h = d.getHours();
                var m = d.getMinutes();
                var s = d.getSeconds();
                var hh = 20 - 1 - h;
                var mm = 60 - 1 - m;
                var ss = 60 - s;
                if (hh > 0) {
                    mm = mm + 60 * hh;
                }
                if (moth < 10) {
                    moth = "0" + moth;
                }
                if (date < 10) {
                    date = "0" + date;
                }
                if (h < 10) {
                    h = "0" + h;
                }
                if (m < 10) {
                    m = "0" + m;
                }
                if (s < 10) {
                    s = "0" + s;
                }
                if (mm < 10) {
                    mm = "0" + mm;
                }
                if (ss < 10) {
                    ss = "0" + ss;
                }

                tdate.value = y + "-" + moth + "-" + date + " " + h + ":" + m + ":" + s;

            }
            window.onload = time;
            var out = window.setInterval(time, 1000);









    </script>



</body>
</html>
